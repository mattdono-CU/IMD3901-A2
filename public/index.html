<head>
    <title>My A-Frame Scene</title>
    <script src="js/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.3.0/dist/aframe-physics-system.min.js"></script>
    <script src="js/new-bubble.js"></script>
    <script src="js/delete-component.js"></script>
  </head>
  
  <body>
    <a-scene shadow="type: basic" physics="debug: false; gravity: 0; restitution: 0.5">
      <a-assets>        
        <!-- Sounds sourced from: http://noproblo.dayjo.org/ZeldaSounds/ -->
        <audio id="buttonTrue" src="/assets/sounds/OOT_MiniMap_On.wav"></audio>
        <audio id="buttonFalse" src="/assets/sounds/OOT_MiniMap_Off.wav"></audio>
        <audio id="bubblePop" src="/assets/sounds/OOT_Shabom_Pop.wav"></audio>
        <audio id="bubbleBounce" src="/assets/sounds/OOT_Shabom_Bounce.wav"></audio>

        <a-mixin  id="mBubble"
                  delete-component
                  dynamic-body
                  geometry="primitive: sphere; radius: 0.4;"
                  material="color: #f1faee; metalness: 1; transparent: true; opacity: 0.8; emissive: #F1FAEE; emissiveIntensity: 0.4;"
                 sound="src: #bubbleBounce; on: collide;"
        ></a-mixin>
        
        <a-mixin  id="mButton"
                  new-bubble
                  static-body
                  geometry="primitive: cylinder; radius: 0.1; height: 0.1;"
                  material="color: #e74c3c; metalness: 0.4; roughness: 0.6;"
                  position="0 0.8 0"
        ></a-mixin>
        
        <a-mixin  id="mPedestal"
                  static-body
                  geometry="primitive: box; height: 0.8; width: 0.4; depth: 0.4;"
                  material="color: #bdc3c7; metalness: 0.2; roughness: 0.8;"
                  position="0 0.4 0"
        ></a-mixin>
          
        <a-mixin  id="mPlane"
                  static-body
                  geometry="primitive: box; height: 0.01; width: 10; depth: 20;"
                  material="side: both; color: #028090;"
        ></a-mixin>
          
        <a-entity id="button-true" sound="src:#buttonTrue"></a-entity>
        <a-entity id="button-false" sound="src:#buttonFalse"></a-entity>
        <a-entity id="bubble-pop" sound="src:#bubblePop"></a-entity>
      </a-assets>
        
      <!-- Camera -->
      <a-entity camera look-controls position="0 1.8 0">
        <a-entity raycaster="objects: .clickable;"
                  cursor="fuse: false; rayOrigin: mouse;"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015;"
                  material="color: #f0f3bd; shader: flat">
        ></a-entity>
        <a-entity static-body
                  geometry="primitive: cylinder; radius: 0.015; height: 20; segmentsRadial: 6; segmentsHeight: 1;"
                  material="visible: true; wireframe: false;"
                  position="0 0 -10"
                  rotation="-90 0 0"
        ></a-entity>
      </a-entity>

      <!-- Player Platform -->
      <a-entity>
         <!--walls-->
         <a-entity  mixin="mPlane"
                    position="-10 5 0"
                    rotation="0 0 90 "
                    material="color"
         ></a-entity>
         <a-entity  mixin="mPlane"
                    position="10 5 0"
                    rotation="0 0 90"
         ></a-entity>
         <a-entity  mixin="mPlane"
                    position="0 5 -10"
                    rotation="0 90 90"
         ></a-entity>
         <a-entity  mixin="mPlane"
                    position="0 5 10"
                    rotation="0 90 90"
         ></a-entity>
         <!--floor-->
         <a-entity  mixin="mPlane"
                    position="5 0 0"
                    material="side: both; color: #05668d"
         ></a-entity>
         <a-entity  mixin="mPlane"
                    position="-5 0 0"
                    material="side: both; color: #05668d"
         ></a-entity>
         <!--ceiling-->
         <a-entity  mixin="mPlane"
                    position="5 10 0"
                    material="side: both; color: #05668d"
         ></a-entity>
         <a-entity  mixin="mPlane"
                    position="-5 10 0"
                    material="side: both; color: #05668d"
         ></a-entity>
      </a-entity>

      <!-- Bubble Button -->
      <a-entity class="clickable" position ="0 0 -1.5">
        <a-entity mixin="mButton">
          <a-animation  attribute="position"
                        from="0 0.8 0" to="0 0.76 0"
                        dur="150"
                        direction="alternate"
                        easing="ease-circ"
                        begin="mousedown"
                        repeat="1"
          ></a-animation>
        </a-entity>
        <a-entity mixin="mPedestal"></a-entity>
      </a-entity>

      <!--Bubbles-->
      <a-entity id="bubbleBin" class="clickable">
        
      </a-entity>
    </a-scene>
  </body>